#:kivy 2.0.0
<LoginScreen>:
    name: 'login'
    MDBoxLayout:
        orientation: 'vertical'
        MDLabel:
            text: 'I am Grateful!'
            font_name: 'Courgette'
            halign: 'center'
            font_size: 45
        MDLabel:
            text: 'Passcode'
            font_name: 'Courgette'
            halign: 'center'
            font_size: 25
        MDTextField:
            id: passcode
            max_text_length: 4
            width: 100
            font_size: 50
            size_hint_x: None
            pos_hint: {'center_x': .5}
            input_filter: 'int'
            password: True
            focus: True
            on_text: root.validate(self)
        MDBoxLayout:
            orientation: 'vertical'
            MDRectangleFlatButton:
                text: 'Submit'
                pos_hint: {'center_x': .5, 'center_y': .5}
                disabled: not root.new_user
                opacity: 1 if root.new_user else 0
                on_release: root.register()
        Widget:
            size_hint_y: None
            height: 80

<MemoryScreen>:
    name: 'memory'
    MDBoxLayout:
        orientation: 'vertical'
        MDBoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: app.window_size[0] * .08
            padding: 20
            spacing: 20
            canvas:
                Color:
                    rgba: app.theme_cls.accent_color
                Rectangle:
                    pos: self.pos
                    size: self.size
            MDLabel:
                text: '[u][size=30][b]Thought for the day![/b][/size][/u]'
                markup: True
                font_name: 'Courgette'
                halign: 'center'
                spacing: 20
        MDBoxLayout:
            orientation: 'vertical'
            padding: 20
            spacing: 20
            # canvas:
            #     Color:
            #         rgba: app.theme_cls.accent_light
            #     Rectangle:
            #         pos: self.pos
            #         size: self.size
            MDSwiper:
                id: mdswiper_id
                item_spacing: 0
                width_mult: 1
                swipe_distance: app.window_size[1] * .5
        MDFloatLayout:
            size_hint: 1, None
            height: app.window_size[0] * .045
            MDFlatButton:
                text: 'Settings'
                pos_hint: {'left': 0}
            MDFlatButton:
                text: '[b]Memories[/b]'
                markup: True
                # pos_hint: {'center_x': .5}
                pos_hint: {'right': 1}


<MemoryTemplate>:
    MDBoxLayout:
        orientation: 'vertical'
        spacing: 20
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            scrollsize_hint_x: None
            scroll_y: 0
            MDBoxLayout:
                size_hint: .9,None
                pos_hint: {'center_x': .5, 'center_y': .5}
                height: self.minimum_height
                orientation: 'vertical'
                padding: 20
                MDLabel:
                    halign: 'center'
                    text: '[size=16]' + root.quote + '[/size]'
                    markup: True
                    font_name: 'Courgette'
        MDLabel:
            text: f'[size=20]{root.date_text}[/size]'
            markup: True
            font_name: 'Courgette'
            size_hint: 1,None
            pos_hint: {'center_x': .5}
            height: 40
            halign: 'center'
        MDBoxLayout:
            size_hint: .8, None
            pos_hint: {'center_x': .5, 'center_y': .5}
            MDSlider:
                min: 1
                max: 5
                value: f'{root.memory.happiness}'
                step: 1
                show_off: False
                on_active: root.set_happiness(self)
        MDBoxLayout:
            orientation: 'vertical'
            id: thingsbox_id


<ThingTemplate>:
    iter_id: self.iter_id
    editable: self.editable
    MDTextField:
        hint_text: f'{str(root.iter_id)}.'
        disabled: True
        size_hint_x: None
        width: 20
    MDTextField:
        id: thing_id
        disabled: not root.editable
        text: root.text
    MDBoxLayout:
        orientation: 'vertical'
        size_hint: None,None
        width: 60
        MDIconButton:
            icon: 'content-save-edit'
            opacity: 1 if root.editable else 0
            disabled: not root.editable
            on_release: root.save(self)
        MDIconButton:
            icon: 'close' if root.editable else 'pencil'
            on_release: root.toggle_edit(self)